{% load i18n %}

<!doctype html>
<html dir="{{LANGUAGE_BIDI|yesno:"rtl,ltr"}}">
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css" />
  <title> {% trans "ניתוח של ״המפה ואתה״ מבית ״ישראל היום״" %} </title>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-59850689-1', 'auto');
    ga('send', 'pageview');

  </script>

  <style type="text/css">
    th {
      text-align: right;
    }
    .answer-invalid {
      color: #888;
    }
    .sim-results {
      background-color: #eef;
    }
    th.sim-results {
      background-color: #ccf;
    }
    .matrix {
      background-color: #fee;
    }
    th.matrix {
      background-color: #fcc;
    }
    .src-text {
      background-color: #ffe;
    }
    th.src-text {
      background-color: #ffc;
    }
    .answer {
      width: 144px;
    }
    .answer input {
      position: relative;
    }
    .answer input:before {
      display: block;
      width: 100%;
      height: 100%;
      border: 1px solid #808080;
      content: "";
      background: #FFF;
    }
    .answer input:checked:after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #faa;
      content: '✗';
    }
    .answer input:not(:checked):after {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #afa;
      content: '✓';
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="panel panel-info">
      <div class="panel-heading">
        {% trans "ניתוח של ״המפה ואתה״" %}
      </div>
      <div class="panel-body">
        <p>
          {% trans "אתר זה נועד לסייע בניתוח המבנה והתכנון של השאלון הפוליטי" %}
          <a target="_blank" href="https://www.israelhayom.co.il/sites/default/files/ilhfiles/elections/map/index.html">
            {% trans "״המפה ואתה״" %}
          </a>
          {% trans "מבית" %}
          <a target="_blank" href="https://www.israelhayom.co.il/">{% trans "״ישראל היום״" %}</a>.
        </p>
        <p>
          {% trans "קוד המקור הפתוח של אתר זה נגיש לציבור הרחב" %}
          <a target="_blank" href="https://github.com/yairchu/hayom_map_re">{% trans "בגיטהאב" %}</a>.
        </p>
      </div>
    </div>
    <div class="row">
      <form>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th colspan=2 style="text-align: left;" class="src-text">
                {% trans "סדר המפלגות" %}:
                <br />
                ({% trans "במקרה של תיקו בניקוד המפלגה הראשונה לפי הסדר מנצחת והשניה נעלמת" %})
              </th>
              {% for party in parties %}
                <td class="src-text">
                  {{ party.name }}
                </td>
              {% endfor %}
            </tr>
            <tr>
              <th colspan=2 style="text-align: left;" class="sim-results">
                {% trans "סיכוי להיות מומלץ על ידי השאלון בהינתן התשובות הנבחרות" %}:
                <br />
                ({% trans "מתוך דגימה של" %} {{num_runs}} {% trans "ריצות אקראיות" %})
              </th>
              {% for party in parties %}
                <td class="sim-results">
                  {{ party.percent }}%
                </td>
              {% endfor %}
            </tr>
            <tr>
              <th class="src-text">
                {% trans "שאלה" %}
              </th>
              <th class="src-text">
                {% trans "תשובה" %}
              </th>
              <th colspan={{num_parties}} class="sim-results">
                {% trans "סיכוי להיות מומלץ בהינתן תשובה מסוימת" %}
              </th>
            </tr>
          </thead>
          <tbody>
            {% for question in questions %}
              <tr style="border-top: 3px solid black; border-bottom: 2px solid black;">
                <td rowspan={{question.num_rows}} class="src-text">
                  {{ question.title }}
                </td>
                <th style="text-align: left;" class="matrix">
                  {% trans "מקדם" %}:
                </th>
                {% for v in question.vector %}
                  <td dir="ltr" style="text-align: center;" class="matrix">
                    {{v}}
                  </td>
                {% endfor %}
              </tr>
              {% for answer in question.answers %}
                <tr>
                  {% if answer.used %}
                    <td class="answer src-text">
                      <input type="checkbox" name="{{question.code}}N{{answer.val}}" />
                      {{ answer.name }}
                      <span dir="ltr">({{ answer.val }})</span>
                    </td>
                    {% for pct in answer.party_percents %}
                      <td class="sim-results">
                        {{pct}}%
                      </td>
                    {% endfor %}
                  {% else %}
                    <td class="answer answer-invalid">
                      <input type="checkbox" name="{{question.code}}N{{answer.val}}" checked="on" />
                      {{ answer.name }}
                      <span dir="ltr">({{ answer.val }})</span>
                    </td>
                    {% for party in parties %}
                      <td class="answer-invalid">
                        -
                      </td>
                    {% endfor %}
                  {% endif %}
                </tr>
              {% endfor %}
            {% endfor %}
          </tbody>
        </table>
        <input type="submit" value="חשב עם התשובות הנבחרות" />
      </form>
    </div>
  </div>
</body>
</html>
